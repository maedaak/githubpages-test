<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<title>勝手CiNii Articles検索窓</title>
<SCRIPT type=text/javascript>
<!--
function search() {
    // ベースとなるURLを設定
    var myTree  = 'https://ci.nii.ac.jp/search?range=0&count=&sortorder=&type=0';

    // フォームからキーワードを入手
    var keyword = document.getElementById("key").value;
    var field = document.getElementById("field").value;

    // フォームにキーワード書き戻し（入力したキーワードが消えないようにする
    document.getElementById("key").value = keyword;

    // キーワードが空のときはアラートを出す
    if (keyword == "") { alert("キーワードを入れてください"); }
    else {
       var URI_parameter = "";
       var SEARCH_URL    = "";
       // UTF8 でURIエンコード
       URI_parameter = encodeURI(keyword);
       if (field != "") {
           URI_parameter = field + '=' + URI_parameter;
       }
       URI_parameter = '&' + URI_parameter;
       SEARCH_URL = myTree.concat(URI_parameter);
       window.location.replace(SEARCH_URL);
    }
}

function enterkey_down(key) {
    if(key === "Enter"){
        search();
    }
}
//-->
</script>
</head>

<body>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<div class="container-fluid">
  <h1>勝手CiNii Articles検索窓</h1>

  <!------■検索フォームはじめ■------>
  <p class="lead">検索窓</p>
  <div class="row">
    <div class="col-md-8 form-group">
        <input class="form-control form-control-lg" size=50 name="key" id="key" onkeypress="enterkey_down(event.key);">
    </div>
    <div class="col-md-4 form-group">
        <select class="form-control custom-select" name="field" id="field">
            <option value="q">全ての項目</option>
            <option value="title">タイトル</option>
            <option value="author">著者</option>
            <option value="journal">刊行物</option>
            <option value="publisher">出版社</option>
        </select>
    </div>
  </div>
  </p>
  <button class="btn btn-primary w-25 btn-lg" onClick="search()">検索</button>
  <!------■フォームおわり■------>
</div>
</body>
</html>
